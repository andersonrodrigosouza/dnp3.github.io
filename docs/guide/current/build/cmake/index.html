<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        

	<title>CMake - opendnp3 2.2.0</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">opendnp3 2.2.0</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li >
                    <a href="../../features/features/">Features</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Build <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../requirements/">Requirements</a>
                        </li>
                    
                        <li >
                            <a href="../libraries/">Libraries</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">CMake</a>
                        </li>
                    
                        <li >
                            <a href="../linux/">Linux</a>
                        </li>
                    
                        <li >
                            <a href="../windows/">Windows</a>
                        </li>
                    
                        <li >
                            <a href="../java/">Java</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../api/architecture/">Architecture</a>
                        </li>
                    
                        <li >
                            <a href="../../api/logging/">Logging</a>
                        </li>
                    
                        <li >
                            <a href="../../api/channels/">Channels</a>
                        </li>
                    
                        <li >
                            <a href="../../api/tls/">TLS Support</a>
                        </li>
                    
                        <li >
                            <a href="../../api/linklayer/">Link-Layer</a>
                        </li>
                    
                        <li >
                            <a href="../../api/masters/">Masters</a>
                        </li>
                    
                        <li >
                            <a href="../../api/outstations/">Outstations</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="../../troubleshooting/troubleshooting/">Troubleshooting</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contributing <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../contributing/tasks/">Common Tasks</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../libraries/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../linux/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/automatak/dnp3">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#cmake">CMake</a></li>
        
    
        <li class="main "><a href="#locating-asio">Locating ASIO</a></li>
        
    
        <li class="main "><a href="#optional-components">Optional Components</a></li>
        
    
        <li class="main "><a href="#build-options">Build Options</a></li>
        
    
        <li class="main "><a href="#building-on-linux">Building on Linux</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h3 id="cmake">CMake</h3>
<p>Opendnp3 uses a build system generator called <a href="http://www.cmake.org/">CMake</a>.  This means that the actual build files (e.g. a Makefile or Microsfot .SLN) are generated from a
common artifact called <strong>CMakeLists.txt</strong>. You can see what one looks like <a href="https://github.com/automatak/dnp3/blob/2.0.x/CMakeLists.txt">here</a>.</p>
<p>This allows the opendnp3 project to maintain a build file for all platforms, and greatly reduces per-platform maintenance. CMake also integrates nicely with
Linux C++ IDEs like <a href="https://www.kdevelop.org/">KDevelop</a> or <a href="https://www.jetbrains.com/clion/">CLion</a>.</p>
<p>One of the more attractive parts of CMake is that it supports <a href="http://www.cmake.org/Wiki/CMake_FAQ#Out-of-source_build_trees">out-of-source builds</a>.</p>
<h3 id="locating-asio">Locating ASIO</h3>
<p>The include sub-folder of the ASIO distribution (the folder that contains 'asio.hpp') needs to be on your include path, but there are several ways you can do this.
You can choose the option that makes the most sense your particular build environment. CMake will try the following things in order to locate your ASIO.</p>
<p><strong>1) Look to see if you checked out ASIO as a git submodule when cloning opendnp3 </strong></p>
<pre><code class="sh">&gt; git clone --recursive https://github.com/automatak/dnp3.git
</code></pre>

<p><strong>2) If 1) fails, it will look to see if the variable ASIO_HOME was defined via the cmake command line.</strong></p>
<pre><code class="sh">&gt; cmake ../dnp3 -DASIO_HOME=C:\libs\asio-asio-1-10-8\asio\include
</code></pre>

<p><strong>3) If 1) and 2) fail, it will check to see if it is defined as an environment variable.</strong></p>
<p>For instance, on Windows you might define your environment variable to look like this.</p>
<pre><code class="sh">ASIO_HOME=C:\libs\asio-asio-1-10-8\asio\include
</code></pre>

<p>On Ubuntu Linux, you might add a line to ~/.bashrc as follows:</p>
<pre><code class="sh">export ASIO_HOME=~/asio-asio-1-10-8/asio/include
</code></pre>

<p><strong>Lastly, cmake will just assume the headers are installed on the system. No checks are performed, so the build will fail is this isn't true</strong></p>
<h3 id="optional-components">Optional Components</h3>
<p>By default, cmake will not build tests, demos, or TLS support. You can enable each optional component individually by specifying
them on the command line:</p>
<pre><code class="sh">&gt; cmake ../dnp3 -D&lt;option&gt;=ON
</code></pre>

<table>
<thead>
<tr>
<th>Option Name</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>DNP3_ALL</td>
<td>build all optional components below</td>
</tr>
<tr>
<td>DNP3_DEMO</td>
<td>example programs</td>
</tr>
<tr>
<td>DNP3_JAVA</td>
<td>java bindings shared library</td>
</tr>
<tr>
<td>DNP3_TEST</td>
<td>unit test suites</td>
</tr>
<tr>
<td>DNP3_TLS</td>
<td>support for TLS channels (requires openssl)</td>
</tr>
<tr>
<td>DNP3_DECODER</td>
<td>decoder module</td>
</tr>
</tbody>
</table>
<p>For example, to build the demos including TLS support:</p>
<pre><code class="sh">&gt; cmake ../dnp3 -DDNP3_DEMO=ON -DDNP3_TLS=ON
</code></pre>

<h3 id="build-options">Build Options</h3>
<p>Most of command-line options you can feed to CMake to generate your build environment are platform-independent.  This documentation can't tell you everything that
CMake can do. We only document some of the more common flags here for your convenience. All of the following examples assume an out-of-source build folder in a
sibling directory to the opendnp3 distribution.</p>
<p><strong>Static vs Dynamic Linking</strong></p>
<p>You can switch between building static or dynamic linking using the STATICLIBS flag. Note that this flag is provided by the project and is not a CMake flag.</p>
<p>On Windows, static libs are the default. On Linux, dynamic libs are the default.</p>
<pre><code>&gt; cmake ../dnp3 STATICLIBS=ON   # build static libraries
&gt; cmake ../dnp3 STATICLIBS=OFF  # build dynamic libraries
</code></pre>

<p><strong>Debug vs Release</strong></p>
<p>You can configure release vs debug builds using the CMAKE_BUILD_TYPE flag
Note that on windows, the generated SLN contains debug and release build targets already</p>
<pre><code class="sh">&gt; cmake ../dnp3 -DCMAKE_BUILD_TYPE=Debug
&gt; cmake ../dnp3 -DCMAKE_BUILD_TYPE=Release
</code></pre>

<p><strong>Non-default generators</strong></p>
<p>By default, CMake will pick a generator to use if you don't tell it which one. You can see a list of all available generators using the help flag.</p>
<pre><code class="sh">&gt; cmake --help
</code></pre>

<p>You can then specify a specific generator, e.g. to do a full 64-bit build on Windows:</p>
<pre><code class="sh">&gt; mkdir build64
&gt; cmake .. -DDNP3_ALL=ON -G &quot;Visual Studio 14 2015 Win64&quot;
</code></pre>

<p><strong>Setting the install prefix</strong></p>
<p>The default install prefix probably won't be right for your platform. You can configure it using CMAKE_INSTALL_PREFIX.</p>
<p>On Debian-based systems this should probably be:</p>
<pre><code class="sh">&gt; cmake .. -DCMAKE_INSTALL_PREFIX=/usr
</code></pre>

<p>On windows, you might put your libraries and headers somewhere like:</p>
<pre><code class="sh">&gt; cmake .. -DCMAKE_INSTALL_PREFIX=C:\libs\opendnp3
</code></pre>

<h3 id="building-on-linux">Building on Linux</h3>
<p>On Linux, the easiest way to use CMake is just to let it create a makefile for you. You can then use this makefile in the same way you normally would.</p>
<pre><code class="sh">&gt; cmake .. &lt;options&gt;
&gt; make
&gt; sudo make install
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
                <center>Copyright Automatak LLC 2015</center>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>